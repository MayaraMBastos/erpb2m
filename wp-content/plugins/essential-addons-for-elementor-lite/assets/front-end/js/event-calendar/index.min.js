var EventCalendar=function(e,c){var t=FullCalendar.Calendar,a=c(".eael-event-calendar-cls",e),o=c(".eaelec-modal-close",e).eq(0),D=c("#eaelecModal",e),m=a.data("events"),n=a.data("first_day"),d=a.data("cal_id"),r=a.data("locale"),l=a.data("defaultview"),s=new t(document.getElementById("eael-event-calendar-"+d),{plugins:["dayGrid","timeGrid","list"],editable:!1,selectable:!1,draggable:!1,firstDay:n,eventTimeFormat:{hour:"2-digit",minute:"2-digit",meridiem:"short"},nextDayThreshold:"00:00:00",header:{left:"prev,next today",center:"title",right:"timeGridDay,timeGridWeek,dayGridMonth,listWeek"},allDayText:"All day",events:m,selectHelper:!0,locale:r,eventLimit:3,defaultView:l,eventRender:function(e){var t=c(e.el),i=e.event;void 0!==i.extendedProps.eventHasComplete&&"yes"===i.extendedProps.eventHasComplete&&(t.find("div.fc-content .fc-title").addClass("eael-event-completed"),t.find("td.fc-list-item-title").addClass("eael-event-completed")),t.attr("href","javascript:void(0);"),t.click(function(e){e.preventDefault(),e.stopPropagation();var t=i.start,a="h:mm A",o=i.end,m=c("span.eaelec-event-date-start"),n=c("span.eaelec-event-date-end");"yes"===i.allDay&&(o=moment(o).subtract(1,"days")._d,a=" ");var d=moment(t).format("YYYY"),r=moment(o).format("YYYY"),l=d<r,s="",Y="";m.html(" "),n.html(" "),D.addClass("eael-ec-popup-ready").removeClass("eael-ec-modal-removing"),"yes"===i.allDay&&moment(t).format("MM-DD-YYYY")===moment(o).format("MM-DD-YYYY")?(s=moment(t).format("MMM Do"),!0===moment(t).isSame(Date.now(),"day")?s="Today":moment(t).format("MM-DD-YYYY")===moment(new Date).add(1,"days").format("MM-DD-YYYY")&&(s="Tomorrow")):(!0===moment(i.start).isSame(Date.now(),"day")&&(s="Today "+moment(i.start).format(a)),moment(t).format("MM-DD-YYYY")===moment(new Date).add(1,"days").format("MM-DD-YYYY")&&(s="Tomorrow "+moment(i.start).format(a)),(moment(t).format("MM-DD-YYYY")<moment(new Date).format("MM-DD-YYYY")||moment(t).format("MM-DD-YYYY")>moment(new Date).add(1,"days").format("MM-DD-YYYY"))&&(s=moment(i.start).format("MMM Do "+a)),s=l?d+" "+s:s,!0===moment(o).isSame(Date.now(),"day")&&(Y=!0!==moment(t).isSame(Date.now(),"day")?" Today "+moment(o).format(a):moment(o).format(a)),moment(t).format("MM-DD-YYYY")!==moment(new Date).add(1,"days").format("MM-DD-YYYY")&&moment(o).format("MM-DD-YYYY")===moment(new Date).add(1,"days").format("MM-DD-YYYY")&&(Y="Tomorrow "+moment(o).format(a)),moment(t).format("MM-DD-YYYY")===moment(new Date).add(1,"days").format("MM-DD-YYYY")&&moment(o).format("MM-DD-YYYY")===moment(new Date).add(1,"days").format("MM-DD-YYYY")&&(Y=moment(o).format(a)),0<moment(o).diff(moment(t),"days")&&n.text().trim().length<1&&(Y=moment(o).format("MMM Do "+a)),moment(t).format("MM-DD-YYYY")===moment(o).format("MM-DD-YYYY")&&(Y=moment(o).format(a)),Y=l?r+" "+Y:Y),void 0!==i.extendedProps.hideEndDate&&"yes"===i.extendedProps.hideEndDate?n.html(" "):n.html(""!=Y?"- "+Y:""),m.html('<i class="eicon-calendar"></i> '+s),c(".eaelec-modal-header h2").html(i.title),c(".eaelec-modal-body p").html(i.extendedProps.description),i.extendedProps.description.length<1?c(".eaelec-modal-body").css("height","auto"):c(".eaelec-modal-body").css("height","300px"),c(".eaelec-modal-footer a").attr("href",i.url),"on"===i.extendedProps.external&&c(".eaelec-modal-footer a").attr("target","_blank"),"on"===i.extendedProps.nofollow&&c(".eaelec-modal-footer a").attr("rel","nofollow"),""==i.url&&c(".eaelec-modal-footer a").css("display","none"),c(".eaelec-modal-header").css("border-left","5px solid "+i.borderColor)})}});o.on("click",function(){event.stopPropagation(),D.addClass("eael-ec-modal-removing").removeClass("eael-ec-popup-ready")}),c(document).on("click",function(e){e.target.closest(".eaelec-modal-content")||D.hasClass("eael-ec-popup-ready")&&D.addClass("eael-ec-modal-removing").removeClass("eael-ec-popup-ready")}),s.render()};jQuery(window).on("elementor/frontend/init",function(){elementorFrontend.hooks.addAction("frontend/element_ready/eael-event-calendar.default",EventCalendar)});